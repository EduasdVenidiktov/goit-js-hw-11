{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// ==========функція відправлення кур'єра на сервер===========\n\nexport function fetchImages(query) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const searchParams = new URLSearchParams({\n    key: '42263617-81d7156b9f7b88cd7b1016c2a',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n  const url = `${BASE_URL}?${searchParams}`;\n  return fetch(url).then(res => res.json());\n}\n","export function templateImage(hit) {\n  const {\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = hit;\n\n  return `<li class=\"gallery-item\" >\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n      <img\n        class=\"gallery-image\"\n        src=\"${webformatURL}\"\n        alt=\"${tags}\"\n      />\n    </a>\n    <div class=\"item-text\">\n    <p><strong>Likes:</strong> ${likes}</p>\n    <p><strong>Views:</strong> ${views}</p>\n    <p><strong>Comments:</strong> ${comments}</p>\n    <p><strong>Downloads:</strong> ${downloads}</p>\n    </div>\n  </li>`;\n}\n\nexport function templateImages(hits) {\n  return hits.map(templateImage).join('');\n}\n","import { fetchImages } from './js/pixabay-api';\nimport { templateImages } from './js/render-functions';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst refs = {\n  formEl: document.querySelector('.form'),\n  loadEl: document.querySelector('.loader'),\n  GalleryEl: document.querySelector('.gallery'),\n};\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n\n  showLoader();\n\n  const query = e.target.elements.query.value.trim(); //діставання значення input без пробілів\n  if (!query) {\n    showError();\n    hideLoader();\n    return;\n  }\n\n  fetchImages(query)\n    .then(data => {\n      showLoader();\n\n      hideLoader();\n      if (data.hits.length === 0) {\n        showErrorMessenge();\n        hideLoader();\n      } else {\n        refs.GalleryEl.innerHTML = ''; //скидання розмітки після submit, але до рендеру\n        renderHits(data.hits);\n      }\n    })\n    .catch(error => {\n      showLoader();\n\n      showError(error);\n      hideLoader();\n\n      refs.GalleryEl.innerHTML = ''; //скидання розмітки після\n    })\n\n    .finally(() => {\n      e.target.reset(); //очистка форми\n    });\n}\n// =====================================================================\nfunction renderHits(hits) {\n  const markup = templateImages(hits);\n  refs.GalleryEl.insertAdjacentHTML('beforeend', markup); // додає нову розмітку\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionSelector: 'img',\n    captionType: 'attr',\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    animation: 250,\n    widthRatio: 0.8,\n    scaleImageToRatio: true,\n  });\n\n  lightbox.refresh();\n}\n\nfunction showError() {\n  iziToast.error({\n    message: 'Please enter a search query.',\n    position: 'topRight',\n  });\n}\nfunction showErrorMessenge() {\n  iziToast.error({\n    backgroundColor: '#EF4040',\n    position: 'topRight',\n    maxWidth: 500,\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n}\n\nconst showLoader = () => {\n  refs.loadEl.classList.remove('hidden');\n};\n\nconst hideLoader = () => {\n  refs.loadEl.classList.add('hidden');\n};\n"],"names":["fetchImages","query","BASE_URL","searchParams","url","res","templateImage","hit","largeImageURL","webformatURL","tags","likes","views","comments","downloads","templateImages","hits","refs","onFormSubmit","e","showLoader","showError","hideLoader","data","showErrorMessenge","renderHits","error","markup","SimpleLightbox","iziToast"],"mappings":"6vBAEO,SAASA,EAAYC,EAAO,CACjC,MAAMC,EAAW,2BACXC,EAAe,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,CAAG,EACKG,EAAM,GAAGF,CAAQ,IAAIC,CAAY,GACvC,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAOA,EAAI,KAAI,CAAE,CAC1C,CCbO,SAASC,EAAcC,EAAK,CACjC,KAAM,CACJ,cAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EAEJ,MAAO;AAAA,oCAC2BC,CAAa;AAAA;AAAA;AAAA,eAGlCC,CAAY;AAAA,eACZC,CAAI;AAAA;AAAA;AAAA;AAAA,iCAIcC,CAAK;AAAA,iCACLC,CAAK;AAAA,oCACFC,CAAQ;AAAA,qCACPC,CAAS;AAAA;AAAA,QAG9C,CAEO,SAASC,EAAeC,EAAM,CACnC,OAAOA,EAAK,IAAIV,CAAa,EAAE,KAAK,EAAE,CACxC,CCrBA,MAAMW,EAAO,CACX,OAAQ,SAAS,cAAc,OAAO,EACtC,OAAQ,SAAS,cAAc,SAAS,EACxC,UAAW,SAAS,cAAc,UAAU,CAC9C,EAEAA,EAAK,OAAO,iBAAiB,SAAUC,CAAY,EAEnD,SAASA,EAAaC,EAAG,CACvBA,EAAE,eAAc,EAEhBC,IAEA,MAAMnB,EAAQkB,EAAE,OAAO,SAAS,MAAM,MAAM,OAC5C,GAAI,CAAClB,EAAO,CACVoB,IACAC,IACA,MACD,CAEDtB,EAAYC,CAAK,EACd,KAAKsB,GAAQ,CACZH,IAEAE,IACIC,EAAK,KAAK,SAAW,GACvBC,IACAF,MAEAL,EAAK,UAAU,UAAY,GAC3BQ,EAAWF,EAAK,IAAI,EAE5B,CAAK,EACA,MAAMG,GAAS,CACdN,IAEAC,EAAe,EACfC,IAEAL,EAAK,UAAU,UAAY,EACjC,CAAK,EAEA,QAAQ,IAAM,CACbE,EAAE,OAAO,OACf,CAAK,CACL,CAEA,SAASM,EAAWT,EAAM,CACxB,MAAMW,EAASZ,EAAeC,CAAI,EAClCC,EAAK,UAAU,mBAAmB,YAAaU,CAAM,EAEpC,IAAIC,EAAe,aAAc,CAChD,SAAU,GACV,gBAAiB,MACjB,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,UAAW,IACX,WAAY,GACZ,kBAAmB,EACvB,CAAG,EAEQ,QAAO,CAClB,CAEA,SAASP,GAAY,CACnBQ,EAAS,MAAM,CACb,QAAS,+BACT,SAAU,UACd,CAAG,CACH,CACA,SAASL,GAAoB,CAC3BK,EAAS,MAAM,CACb,gBAAiB,UACjB,SAAU,WACV,SAAU,IACV,QACE,0EACN,CAAG,CACH,CAEA,MAAMT,EAAa,IAAM,CACvBH,EAAK,OAAO,UAAU,OAAO,QAAQ,CACvC,EAEMK,EAAa,IAAM,CACvBL,EAAK,OAAO,UAAU,IAAI,QAAQ,CACpC"}